{% extends "base.html" %}
{% load i18n utils_tags %}

{% block title %}Persona - {{ person.name }}{% endblock title %}
{% block page_title %}Persona - {{ person.name }}{% endblock page_title %}

{% block page_buttons %}
<a href="{% url "meals:create" person.name %}" title="{% trans "Agregar comida" %}"><span class="glyphicon glyphicon-plus icon-add"></span></a>
<a href="{% url "persons:import" person.name %}" title="{% trans "Importar comidas" %}"><span class="glyphicon glyphicon-import icon-add"></span></a>
{% endblock page_buttons %}

{% block content %}

<h2>{% trans "Comidas" %} </h2>
<ul>
  {% for meal, log in meals %}
  <li class="meal">
  <h4><a href="{% url "meals:detail" person.name meal.date %}">{{ meal.date|date:'M j, Y' }}</a></h4>
  {% with nval=log.nutritional_value %}
  <span class="meal-value-{{ nval.calories|range_class:person.valid_calories }}">{{ nval.calories|floatformat:1 }} kCal</span>
  <table class="table text-center meal-table">
    <tbody>
    <tr>
      <td class="meal-value-{{ nval.consumed_carbs|range_class:person.valid_carbs }}" title="{% trans "Net carbs" %}">{{ nval.consumed_carbs|floatformat:1 }}</td>
      <td class="meal-value-{{ nval.protein|range_class:person.valid_proteins }}" title="{% trans "ProteÃ­nas" %}">{{ nval.protein|floatformat:1 }}</td>
      <td class="meal-value-{{ nval.fat|range_class:person.valid_fat }}" title="{% trans "Grasas" %}">{{ nval.fat|floatformat:1 }}</td>
    </tr>
    </tbody>
  </table>
  {% endwith %}
  </li>
  {% endfor %}
</ul>
<div class="row">
  <a class="btn btn-primary pull-right" href="{% url "persons:list" %}">{% trans "Volver" %}</a>
</div>
{% endblock content %}

{% block extra_css %}
<style>
li.meal {
  list-style-type: none;
  width: 150px;
  height: 100px;
  display: inline-block;
  text-align: center;
  border: 1px solid #EBEBEB;
  border-radius: 5px;
  margin: 2px;
}

.meal-table th {
  text-align: center;
}

.meal-value-danger {
  color: red;
}

.meal-value-warning {
  color: yellow;
}

.meal-value-ok {
  color: lightgreen;
}
</style>
{% endblock extra_css %}
{# vim: set ft=htmldjango :#}
